name: Weekly Auto Merge Action

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the master branch
  schedule:
    - cron: "0 16 * * 3"

jobs:
  auto-force-merge:
    runs-on: rnd-it-ubuntu
    steps:
    - name: Get current date
      id: date
      run: echo "::set-output name=date::$(date +'%Y-%m-%d')"
    - name: Clean the workspace
      run: sudo rm -rf $GITHUB_WORKSPACE/*
    - name: Checkout Code
      uses: actions/checkout@v2
    - name: auto-merge
      uses: chingyu-chen/action-auto-merge@master
      with:
        github_token: ${{ secrets.GITHUB }}
      env:
        GITHUB_API_URL: 'https://api.github.azc.ext.hp.com'
        GITHUB_SERVER_URL: 'http://github.azc.ext.hp.com'
